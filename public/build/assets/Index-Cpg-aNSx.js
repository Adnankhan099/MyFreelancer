import{p as P,x as yt,O as Y,r as vt,o as x,c as Be,w as kt,a as h,f as I,g as pe,F as q,t as M,j as O,d as Et,v as _t,N as wt,u as ge,h as jt,n as Fe}from"./app-CJY_-Vbw.js";import{_ as Tt}from"./style.css_vue_type_style_index_0_src_true_lang-Dj2oTo-4.js";import{f as be}from"./format-CgkOAR4p.js";import"./AuthHeader-5TF72yGU.js";import"./logo2-BR_e6daD.js";import"./vue-router-CjXn_nlE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function ae(t){if(typeof t!="string"||!t)throw new Error("expected a non-empty string, got: "+t)}function ye(t){if(typeof t!="number")throw new Error("expected a number, got: "+t)}const St=1,xt=1,F="emoji",U="keyvalue",Ae="favorites",Ct="tokens",Ve="tokens",It="unicode",He="count",Mt="group",At="order",Ye="group-order",Se="eTag",fe="url",Ne="skinTone",K="readonly",De="readwrite",qe="skinUnicodes",Dt="skinUnicodes",Lt="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",$t="en";function Ot(t,e){const o=new Set,i=[];for(const r of t){const n=e(r);o.has(n)||(o.add(n),i.push(r))}return i}function Re(t){return Ot(t,e=>e.unicode)}function Bt(t){function e(o,i,r){const n=i?t.createObjectStore(o,{keyPath:i}):t.createObjectStore(o);if(r)for(const[a,[u,m]]of Object.entries(r))n.createIndex(a,u,{multiEntry:m});return n}e(U),e(F,It,{[Ve]:[Ct,!0],[Ye]:[[Mt,At]],[qe]:[Dt,!0]}),e(Ae,void 0,{[He]:[""]})}const xe={},de={},me={};function Xe(t,e,o){o.onerror=()=>e(o.error),o.onblocked=()=>e(new Error("IDB blocked")),o.onsuccess=()=>t(o.result)}async function Ft(t){const e=await new Promise((o,i)=>{const r=indexedDB.open(t,St);xe[t]=r,r.onupgradeneeded=n=>{n.oldVersion<xt&&Bt(r.result)},Xe(o,i,r)});return e.onclose=()=>Le(t),e}function Nt(t){return de[t]||(de[t]=Ft(t)),de[t]}function L(t,e,o,i){return new Promise((r,n)=>{const a=t.transaction(e,o,{durability:"relaxed"}),u=typeof e=="string"?a.objectStore(e):e.map(c=>a.objectStore(c));let m;i(u,a,c=>{m=c}),a.oncomplete=()=>r(m),a.onerror=()=>n(a.error)})}function Le(t){const e=xe[t],o=e&&e.result;if(o){o.close();const i=me[t];if(i)for(const r of i)r()}delete xe[t],delete de[t],delete me[t]}function Rt(t){return new Promise((e,o)=>{Le(t);const i=indexedDB.deleteDatabase(t);Xe(e,o,i)})}function Pt(t,e){let o=me[t];o||(o=me[t]=[]),o.push(e)}const zt=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function z(t){return t.split(/[\s_]+/).map(e=>!e.match(/\w/)||zt.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const Ut=2;function Ze(t){return t.filter(Boolean).map(e=>e.toLowerCase()).filter(e=>e.length>=Ut)}function Kt(t){return t.map(({annotation:o,emoticon:i,group:r,order:n,shortcodes:a,skins:u,tags:m,emoji:c,version:l})=>{const p=[...new Set(Ze([...(a||[]).map(z).flat(),...m.map(z).flat(),...z(o),i]))].sort(),f={annotation:o,group:r,order:n,tags:m,tokens:p,unicode:c,version:l};if(i&&(f.emoticon=i),a&&(f.shortcodes=a),u){f.skinTones=[],f.skinUnicodes=[],f.skinVersions=[];for(const{tone:v,emoji:A,version:T}of u)f.skinTones.push(v),f.skinUnicodes.push(A),f.skinVersions.push(T)}return f})}function Je(t,e,o,i){t[e](o).onsuccess=r=>i&&i(r.target.result)}function B(t,e,o){Je(t,"get",e,o)}function Qe(t,e,o){Je(t,"getAll",e,o)}function $e(t){t.commit&&t.commit()}function Wt(t,e){let o=t[0];for(let i=1;i<t.length;i++){const r=t[i];e(o)>e(r)&&(o=r)}return o}function et(t,e){const o=Wt(t,r=>r.length),i=[];for(const r of o)t.some(n=>n.findIndex(a=>e(a)===e(r))===-1)||i.push(r);return i}async function Gt(t){return!await Oe(t,U,fe)}async function Vt(t,e,o){const[i,r]=await Promise.all([Se,fe].map(n=>Oe(t,U,n)));return i===o&&r===e}async function Ht(t,e){return L(t,F,K,(i,r,n)=>{let a;const u=()=>{i.getAll(a&&IDBKeyRange.lowerBound(a,!0),50).onsuccess=m=>{const c=m.target.result;for(const l of c)if(a=l.unicode,e(l))return n(l);if(c.length<50)return n();u()}};u()})}async function tt(t,e,o,i){try{const r=Kt(e);await L(t,[F,U],De,([n,a],u)=>{let m,c,l=0;function p(){++l===2&&f()}function f(){if(!(m===i&&c===o)){n.clear();for(const v of r)n.put(v);a.put(i,Se),a.put(o,fe),$e(u)}}B(a,Se,v=>{m=v,p()}),B(a,fe,v=>{c=v,p()})})}finally{}}async function Yt(t,e){return L(t,F,K,(o,i,r)=>{const n=IDBKeyRange.bound([e,0],[e+1,0],!1,!0);Qe(o.index(Ye),n,r)})}async function nt(t,e){const o=Ze(z(e));return o.length?L(t,F,K,(i,r,n)=>{const a=[],u=()=>{a.length===o.length&&m()},m=()=>{const c=et(a,l=>l.unicode);n(c.sort((l,p)=>l.order<p.order?-1:1))};for(let c=0;c<o.length;c++){const l=o[c],p=c===o.length-1?IDBKeyRange.bound(l,l+"￿",!1,!0):IDBKeyRange.only(l);Qe(i.index(Ve),p,f=>{a.push(f),u()})}}):[]}async function qt(t,e){const o=await nt(t,e);return o.length?o.filter(i=>(i.shortcodes||[]).map(n=>n.toLowerCase()).includes(e.toLowerCase()))[0]||null:await Ht(t,r=>(r.shortcodes||[]).includes(e.toLowerCase()))||null}async function Xt(t,e){return L(t,F,K,(o,i,r)=>B(o,e,n=>{if(n)return r(n);B(o.index(qe),e,a=>r(a||null))}))}function Oe(t,e,o){return L(t,e,K,(i,r,n)=>B(i,o,n))}function Zt(t,e,o,i){return L(t,e,De,(r,n)=>{r.put(i,o),$e(n)})}function Jt(t,e){return L(t,Ae,De,(o,i)=>B(o,e,r=>{o.put((r||0)+1,e),$e(i)}))}function Qt(t,e,o){return o===0?[]:L(t,[Ae,F],K,([i,r],n,a)=>{const u=[];i.index(He).openCursor(void 0,"prev").onsuccess=m=>{const c=m.target.result;if(!c)return a(u);function l(v){if(u.push(v),u.length===o)return a(u);c.continue()}const p=c.primaryKey,f=e.byName(p);if(f)return l(f);B(r,p,v=>{if(v)return l(v);c.continue()})}})}const ce="";function en(t,e){const o=new Map;for(const r of t){const n=e(r);for(const a of n){let u=o;for(let c=0;c<a.length;c++){const l=a.charAt(c);let p=u.get(l);p||(p=new Map,u.set(l,p)),u=p}let m=u.get(ce);m||(m=[],u.set(ce,m)),m.push(r)}}return(r,n)=>{let a=o;for(let c=0;c<r.length;c++){const l=r.charAt(c),p=a.get(l);if(p)a=p;else return[]}if(n)return a.get(ce)||[];const u=[],m=[a];for(;m.length;){const l=[...m.shift().entries()].sort((p,f)=>p[0]<f[0]?-1:1);for(const[p,f]of l)p===ce?u.push(...f):m.push(f)}return u}}const tn=["name","url"];function nn(t){const e=t&&Array.isArray(t),o=e&&t.length&&(!t[0]||tn.some(i=>!(i in t[0])));if(!e||o)throw new Error("Custom emojis are in the wrong format")}function Pe(t){nn(t);const e=(f,v)=>f.name.toLowerCase()<v.name.toLowerCase()?-1:1,o=t.sort(e),r=en(t,f=>[...new Set((f.shortcodes||[]).map(v=>z(v)).flat())]),n=f=>r(f,!0),a=f=>r(f,!1),u=f=>{const v=z(f),A=v.map((T,E)=>(E<v.length-1?n:a)(T));return et(A,T=>T.name).sort(e)},m=new Map,c=new Map;for(const f of t){c.set(f.name.toLowerCase(),f);for(const v of f.shortcodes||[])m.set(v.toLowerCase(),f)}return{all:o,search:u,byShortcode:f=>m.get(f.toLowerCase()),byName:f=>c.get(f.toLowerCase())}}const on=typeof wrappedJSObject<"u";function X(t){if(!t)return t;if(on&&(t=structuredClone(t)),delete t.tokens,t.skinTones){const e=t.skinTones.length;t.skins=Array(e);for(let o=0;o<e;o++)t.skins[o]={tone:t.skinTones[o],unicode:t.skinUnicodes[o],version:t.skinVersions[o]};delete t.skinTones,delete t.skinUnicodes,delete t.skinVersions}return t}function ot(t){t||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const rn=["annotation","emoji","group","order","tags","version"];function sn(t){if(!t||!Array.isArray(t)||!t[0]||typeof t[0]!="object"||rn.some(e=>!(e in t[0])))throw new Error("Emoji data is in the wrong format")}function it(t,e){if(Math.floor(t.status/100)!==2)throw new Error("Failed to fetch: "+e+":  "+t.status)}async function an(t){const e=await fetch(t,{method:"HEAD"});it(e,t);const o=e.headers.get("etag");return ot(o),o}async function Ce(t){const e=await fetch(t);it(e,t);const o=e.headers.get("etag");ot(o);const i=await e.json();return sn(i),[o,i]}function cn(t){for(var e="",o=new Uint8Array(t),i=o.byteLength,r=-1;++r<i;)e+=String.fromCharCode(o[r]);return e}function ln(t){for(var e=t.length,o=new ArrayBuffer(e),i=new Uint8Array(o),r=-1;++r<e;)i[r]=t.charCodeAt(r);return o}async function rt(t){const e=JSON.stringify(t);let o=ln(e);const i=await crypto.subtle.digest("SHA-1",o),r=cn(i);return btoa(r)}async function dn(t,e){let o,i=await an(e);if(!i){const r=await Ce(e);i=r[0],o=r[1],i||(i=await rt(o))}await Vt(t,e,i)||(o||(o=(await Ce(e))[1]),await tt(t,o,e,i))}async function un(t,e){let[o,i]=await Ce(e);o||(o=await rt(i)),await tt(t,i,e,o)}class fn{constructor({dataSource:e=Lt,locale:o=$t,customEmoji:i=[]}={}){this.dataSource=e,this.locale=o,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=Pe(i),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await Nt(this._dbName);Pt(this._dbName,this._clear);const o=this.dataSource;await Gt(e)?await un(e,o):this._lazyUpdate=dn(e,o)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return ye(e),await this.ready(),Re(await Yt(this._db,e)).map(X)}async getEmojiBySearchQuery(e){ae(e),await this.ready();const o=this._custom.search(e),i=Re(await nt(this._db,e)).map(X);return[...o,...i]}async getEmojiByShortcode(e){ae(e),await this.ready();const o=this._custom.byShortcode(e);return o||X(await qt(this._db,e))}async getEmojiByUnicodeOrName(e){ae(e),await this.ready();const o=this._custom.byName(e);return o||X(await Xt(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await Oe(this._db,U,Ne)||0}async setPreferredSkinTone(e){return ye(e),await this.ready(),Zt(this._db,U,Ne,e)}async incrementFavoriteEmojiCount(e){return ae(e),await this.ready(),Jt(this._db,e)}async getTopFavoriteEmoji(e){return ye(e),await this.ready(),(await Qt(this._db,this._custom,e)).map(X)}set customEmoji(e){this._custom=Pe(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Le(this._dbName)}async delete(){await this._shutdown(),await Rt(this._dbName)}}const Ie=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map(([t,e,o])=>({id:t,emoji:e,name:o})),ve=Ie.slice(1),mn=2,ze=6,st=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function Ue(t){return t.unicode.includes("‍")}const hn={"🫨":15.1,"🫠":14,"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},pn=1e3,gn="🖐️",bn=8,yn=["😊","😒","❤️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],at='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',vn=(t,e)=>t<e?-1:t>e?1:0,Ke=(t,e)=>{const o=document.createElement("canvas");o.width=o.height=1;const i=o.getContext("2d");return i.textBaseline="top",i.font=`100px ${at}`,i.fillStyle=e,i.scale(.01,.01),i.fillText(t,0,0),i.getImageData(0,0,1,1).data},kn=(t,e)=>{const o=[...t].join(","),i=[...e].join(",");return o===i&&!o.startsWith("0,0,0,")};function En(t){const e=Ke(t,"#000"),o=Ke(t,"#fff");return e&&o&&kn(e,o)}function _n(){const t=Object.entries(hn);try{for(const[e,o]of t)if(En(e))return o}catch{}finally{}return t[0][1]}let ke;const Ee=()=>(ke||(ke=new Promise(t=>st(()=>t(_n())))),ke),Me=new Map,wn="️",jn="\uD83C",Tn="‍",Sn=127995,xn=57339;function Cn(t,e){if(e===0)return t;const o=t.indexOf(Tn);return o!==-1?t.substring(0,o)+String.fromCodePoint(Sn+e-1)+t.substring(o):(t.endsWith(wn)&&(t=t.substring(0,t.length-1)),t+jn+String.fromCodePoint(xn+e-1))}function D(t){t.preventDefault(),t.stopPropagation()}function _e(t,e,o){return e+=t?-1:1,e<0?e=o.length-1:e>=o.length&&(e=0),e}function ct(t,e){const o=new Set,i=[];for(const r of t){const n=e(r);o.has(n)||(o.add(n),i.push(r))}return i}function In(t,e){const o=i=>{const r={};for(const n of i)typeof n.tone=="number"&&n.version<=e&&(r[n.tone]=n.unicode);return r};return t.map(({unicode:i,skins:r,shortcodes:n,url:a,name:u,category:m,annotation:c})=>({unicode:i,name:u,shortcodes:n,url:a,category:m,annotation:c,id:i||u,skins:r&&o(r)}))}const ue=requestAnimationFrame;let Mn=typeof ResizeObserver=="function";function An(t,e,o){let i;Mn?(i=new ResizeObserver(r=>o(r[0].contentRect.width)),i.observe(t)):ue(()=>o(t.getBoundingClientRect().width)),e.addEventListener("abort",()=>{i&&i.disconnect()})}function We(t){{const e=document.createRange();return e.selectNode(t.firstChild),e.getBoundingClientRect().width}}let we;function Dn(t,e,o){for(const i of t){const r=o(i),n=We(r);typeof we>"u"&&(we=We(e));const a=n/1.8<we;Me.set(i.unicode,a)}}function Ln(t){return ct(t,e=>e)}function $n(t){t&&(t.scrollTop=0)}function Z(t,e,o){let i=t.get(e);return i||(i=o(),t.set(e,i)),i}function Ge(t){return""+t}function On(t){const e=document.createElement("template");return e.innerHTML=t,e}const Bn=new WeakMap,Fn=new WeakMap,Nn=Symbol("un-keyed"),Rn="replaceChildren"in Element.prototype;function Pn(t,e){Rn?t.replaceChildren(...e):(t.innerHTML="",t.append(...e))}function zn(t,e){let o=t.firstChild,i=0;for(;o;){if(e[i]!==o)return!0;o=o.nextSibling,i++}return i!==e.length}function Un(t,e){const{targetNode:o}=e;let{targetParentNode:i}=e,r=!1;i?r=zn(i,t):(r=!0,e.targetNode=void 0,e.targetParentNode=i=o.parentNode),r&&Pn(i,t)}function Kn(t,e){for(const o of e){const{targetNode:i,currentExpression:r,binding:{expressionIndex:n,attributeName:a,attributeValuePre:u,attributeValuePost:m}}=o,c=t[n];if(r!==c)if(o.currentExpression=c,a)i.setAttribute(a,u+Ge(c)+m);else{let l;Array.isArray(c)?Un(c,o):c instanceof Element?(l=c,i.replaceWith(l)):i.nodeValue=Ge(c),l&&(o.targetNode=l)}}}function Wn(t){let e="",o=!1,i=!1,r=-1;const n=new Map,a=[];for(let m=0,c=t.length;m<c;m++){const l=t[m];if(e+=l,m===c-1)break;for(let g=0;g<l.length;g++)switch(l.charAt(g)){case"<":{l.charAt(g+1)==="/"?a.pop():(o=!0,a.push(++r));break}case">":{o=!1,i=!1;break}case"=":{i=!0;break}}const p=a[a.length-1],f=Z(n,p,()=>[]);let v,A,T;if(i){const g=/(\S+)="?([^"=]*)$/.exec(l);v=g[1],A=g[2],T=/^[^">]*/.exec(t[m+1])[0]}const E={attributeName:v,attributeValuePre:A,attributeValuePost:T,expressionIndex:m};f.push(E),!o&&!i&&(e+=" ")}return{template:On(e),elementsToBindings:n}}function Gn(t,e){const o=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);let r=t,n=-1;do{const a=e.get(++n);if(a)for(let u=0;u<a.length;u++){const m=a[u],c=m.attributeName?r:r.firstChild,l={binding:m,targetNode:c,targetParentNode:void 0,currentExpression:void 0};o.push(l)}}while(r=i.nextNode());return o}function Vn(t){const{template:e,elementsToBindings:o}=Z(Bn,t,()=>Wn(t)),i=e.cloneNode(!0).content.firstElementChild,r=Gn(i,o);return function(a){return Kn(a,r),i}}function Hn(t){const e=Z(Fn,t,()=>new Map);let o=Nn;function i(n,...a){const u=Z(e,n,()=>new Map);return Z(u,o,()=>Vn(n))(a)}function r(n,a,u){return n.map((m,c)=>{const l=o;o=u(m);try{return a(m,c)}finally{o=l}})}return{map:r,html:i}}function Yn(t,e,o,i,r,n,a,u){const{labelWithSkin:m,titleForEmoji:c,unicodeWithSkin:l}=o,{html:p,map:f}=Hn(e);function v(E,g,_){return f(E,(w,$)=>p`<button role="${g?"option":"menuitem"}" aria-selected="${e.searchMode?$===e.activeSearchItem:""}" aria-label="${m(w,e.currentSkinTone)}" title="${c(w)}" class="emoji ${g&&$===e.activeSearchItem?"active":""}" id="${`${_}-${w.id}`}">${w.unicode?l(w,e.currentSkinTone):p`<img class="custom-emoji" src="${w.url}" alt="" loading="lazy">`}</button>`,w=>`${_}-${w.id}`)}const T=p`<section data-ref="rootElement" class="picker" aria-label="${e.i18n.regionLabel}" style="${e.pickerStyle}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${e.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!!(e.searchMode&&e.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${e.activeSearchItemId?`emo-${e.activeSearchItemId}`:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${e.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${e.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${e.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${e.skinTonePickerExpanded?"hide-focus":""}" aria-label="${e.skinToneButtonLabel}" title="${e.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${e.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${e.skinToneButtonText}</button></div><span id="skintone-description" class="sr-only">${e.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${e.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${e.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${e.i18n.skinTonesLabel}" aria-activedescendant="skintone-${e.activeSkinTone}" aria-hidden="${!e.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${f(e.skinTones,(E,g)=>p`<div id="skintone-${g}" class="emoji ${g===e.activeSkinTone?"active":""}" aria-selected="${g===e.activeSkinTone}" role="option" title="${e.i18n.skinTones[g]}" aria-label="${e.i18n.skinTones[g]}">${E}</div>`,E=>E)}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${e.groups.length},1fr)" aria-label="${e.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${f(e.groups,E=>p`<button role="tab" class="nav-button" aria-controls="tab-${E.id}" aria-label="${e.i18n.categories[E.name]}" aria-selected="${!e.searchMode&&e.currentGroup.id===E.id}" title="${e.i18n.categories[E.name]}" data-group-id="${E.id}"><div class="nav-emoji emoji">${E.emoji}</div></button>`,E=>E.id)}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(e.isRtl?-1:1)*e.currentGroupIndex*100}%)"></div></div><div class="message ${e.message?"":"gone"}" role="alert" aria-live="polite">${e.message}</div><div data-ref="tabpanelElement" class="tabpanel ${!e.databaseLoaded||e.message?"gone":""}" role="${e.searchMode?"region":"tabpanel"}" aria-label="${e.searchMode?e.i18n.searchResultsLabel:e.i18n.categories[e.currentGroup.name]}" id="${e.searchMode?"":`tab-${e.currentGroup.id}`}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${f(e.currentEmojisWithCategories,(E,g)=>p`<div><div id="menu-label-${g}" class="category ${e.currentEmojisWithCategories.length===1&&e.currentEmojisWithCategories[0].category===""?"gone":""}" aria-hidden="true">${e.searchMode?e.i18n.searchResultsLabel:E.category?E.category:e.currentEmojisWithCategories.length>1?e.i18n.categories.custom:e.i18n.categories[e.currentGroup.name]}</div><div class="emoji-menu" role="${e.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${g}" id="${e.searchMode?"search-results":""}">${v(E.emojis,e.searchMode,"emo")}</div></div>`,E=>E.category)}</div></div><div class="favorites emoji-menu ${e.message?"gone":""}" role="menu" aria-label="${e.i18n.favoritesLabel}" style="padding-inline-end:${`${e.scrollbarWidth}px`}" data-on-click="onEmojiClick">${v(e.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>`;if(u){t.appendChild(T);const E=(g,_)=>{for(const w of t.querySelectorAll(`[${g}]`))_(w,w.getAttribute(g))};for(const g of["click","focusout","input","keydown","keyup"])E(`data-on-${g}`,(_,w)=>{_.addEventListener(g,i[w])});E("data-ref",(g,_)=>{n[_]=g}),E("data-action",(g,_)=>{r[_](g)}),a.addEventListener("abort",()=>{t.removeChild(T)})}}const he=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t);function qn(t){let e=!1,o;const i=new Map,r=new Set;let n;const a=()=>{if(e)return;const c=[...r];r.clear();try{for(const l of c)l()}finally{n=!1,r.size&&(n=!0,he(a))}},u=new Proxy({},{get(c,l){if(o){let p=i.get(l);p||(p=new Set,i.set(l,p)),p.add(o)}return c[l]},set(c,l,p){c[l]=p;const f=i.get(l);if(f){for(const v of f)r.add(v);n||(n=!0,he(a))}return!0}}),m=c=>{const l=()=>{const p=o;o=l;try{return c()}finally{o=p}};return l()};return t.addEventListener("abort",()=>{e=!0}),{state:u,createEffect:m}}function je(t,e,o){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!o(t[i],e[i]))return!1;return!0}const Te=[],{assign:le}=Object;function Xn(t,e){const o={},i=new AbortController,r=i.signal,{state:n,createEffect:a}=qn(r);le(n,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),le(n,e),le(n,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:bn,isRtl:!1,scrollbarWidth:0,currentGroupIndex:0,groups:ve,databaseLoaded:!1,activeSearchItemId:void 0}),a(()=>{n.currentGroup!==n.groups[n.currentGroupIndex]&&(n.currentGroup=n.groups[n.currentGroupIndex])});const u=s=>{t.getElementById(s).focus()},m=s=>t.getElementById(`emo-${s.id}`),c=(s,d)=>{o.rootElement.dispatchEvent(new CustomEvent(s,{detail:d,bubbles:!0,composed:!0}))},l=(s,d)=>s.id===d.id,p=(s,d)=>{const{category:b,emojis:k}=s,{category:j,emojis:S}=d;return b!==j?!1:je(k,S,l)},f=s=>{je(n.currentEmojis,s,l)||(n.currentEmojis=s)},v=s=>{n.searchMode!==s&&(n.searchMode=s)},A=s=>{je(n.currentEmojisWithCategories,s,p)||(n.currentEmojisWithCategories=s)},T=(s,d)=>d&&s.skins&&s.skins[d]||s.unicode,_={labelWithSkin:(s,d)=>Ln([s.name||T(s,d),s.annotation,...s.shortcodes||Te].filter(Boolean)).join(", "),titleForEmoji:s=>s.annotation||(s.shortcodes||Te).join(", "),unicodeWithSkin:T},w={onClickSkinToneButton:mt,onEmojiClick:ie,onNavClick:y,onNavKeydown:R,onSearchKeydown:oe,onSkinToneOptionsClick:ft,onSkinToneOptionsFocusOut:gt,onSkinToneOptionsKeydown:ht,onSkinToneOptionsKeyup:pt,onSearchInput:bt},$={calculateEmojiGridStyle:J};let W=!0;a(()=>{Yn(t,n,_,w,$,o,r,W),W=!1}),n.emojiVersion||Ee().then(s=>{s||(n.message=n.i18n.emojiUnsupportedMessage)}),a(()=>{async function s(){let d=!1;const b=setTimeout(()=>{d=!0,n.message=n.i18n.loadingMessage},pn);try{await n.database.ready(),n.databaseLoaded=!0}catch(k){console.error(k),n.message=n.i18n.networkErrorMessage}finally{clearTimeout(b),d&&(d=!1,n.message="")}}n.database&&s()}),a(()=>{n.pickerStyle=`
      --num-groups: ${n.groups.length}; 
      --indicator-opacity: ${n.searchMode?0:1}; 
      --num-skintones: ${ze};`}),a(()=>{n.customEmoji&&n.database&&G()}),a(()=>{n.customEmoji&&n.customEmoji.length?n.groups!==Ie&&(n.groups=Ie):n.groups!==ve&&(n.currentGroupIndex&&n.currentGroupIndex--,n.groups=ve)}),a(()=>{async function s(){n.databaseLoaded&&(n.currentSkinTone=await n.database.getPreferredSkinTone())}s()}),a(()=>{n.skinTones=Array(ze).fill().map((s,d)=>Cn(n.skinToneEmoji,d))}),a(()=>{n.skinToneButtonText=n.skinTones[n.currentSkinTone]}),a(()=>{n.skinToneButtonLabel=n.i18n.skinToneLabel.replace("{skinTone}",n.i18n.skinTones[n.currentSkinTone])}),a(()=>{async function s(){const{database:d}=n,b=(await Promise.all(yn.map(k=>d.getEmojiByUnicodeOrName(k)))).filter(Boolean);n.defaultFavoriteEmojis=b}n.databaseLoaded&&s()});function G(){n.database.customEmoji=n.customEmoji||Te}a(()=>{async function s(){G();const{database:d,defaultFavoriteEmojis:b,numColumns:k}=n,j=await d.getTopFavoriteEmoji(k),S=await N(ct([...j,...b],C=>C.unicode||C.name).slice(0,k));n.currentFavorites=S}n.databaseLoaded&&n.defaultFavoriteEmojis&&s()});function J(s){An(s,r,d=>{{const b=getComputedStyle(o.rootElement),k=parseInt(b.getPropertyValue("--num-columns"),10),j=b.getPropertyValue("direction")==="rtl",C=s.parentElement.getBoundingClientRect().width-d;n.numColumns=k,n.scrollbarWidth=C,n.isRtl=j}})}a(()=>{async function s(){const{searchText:d,currentGroup:b,databaseLoaded:k,customEmoji:j}=n;if(!k)n.currentEmojis=[],n.searchMode=!1;else if(d.length>=mn){const S=await ne(d);n.searchText===d&&(f(S),v(!0))}else{const{id:S}=b;if(S!==-1||j&&j.length){const C=await te(S);n.currentGroup.id===S&&(f(C),v(!1))}}}s()}),a(()=>{const{currentEmojis:s,emojiVersion:d}=n,b=s.filter(k=>k.unicode).filter(k=>Ue(k)&&!Me.has(k.unicode));if(!d&&b.length)f(s),ue(()=>Q(b));else{const k=d?s:s.filter(ee);f(k),ue(()=>$n(o.tabpanelElement))}});function Q(s){Dn(s,o.baselineEmoji,m),n.currentEmojis=n.currentEmojis}function ee(s){return!s.unicode||!Ue(s)||Me.get(s.unicode)}async function V(s){const d=n.emojiVersion||await Ee();return s.filter(({version:b})=>!b||b<=d)}async function N(s){return In(s,n.emojiVersion||await Ee())}async function te(s){const d=s===-1?n.customEmoji:await n.database.getEmojiByGroup(s);return N(await V(d))}async function ne(s){return N(await V(await n.database.getEmojiBySearchQuery(s)))}a(()=>{}),a(()=>{function s(){const{searchMode:b,currentEmojis:k}=n;if(b)return[{category:"",emojis:k}];const j=new Map;for(const S of k){const C=S.category||"";let se=j.get(C);se||(se=[],j.set(C,se)),se.push(S)}return[...j.entries()].map(([S,C])=>({category:S,emojis:C})).sort((S,C)=>n.customCategorySorting(S.category,C.category))}const d=s();A(d)}),a(()=>{n.activeSearchItemId=n.activeSearchItem!==-1&&n.currentEmojis[n.activeSearchItem].id}),a(()=>{const{rawSearchText:s}=n;st(()=>{n.searchText=(s||"").trim(),n.activeSearchItem=-1})});function oe(s){if(!n.searchMode||!n.currentEmojis.length)return;const d=b=>{D(s),n.activeSearchItem=_e(b,n.activeSearchItem,n.currentEmojis)};switch(s.key){case"ArrowDown":return d(!1);case"ArrowUp":return d(!0);case"Enter":if(n.activeSearchItem===-1)n.activeSearchItem=0;else return D(s),H(n.currentEmojis[n.activeSearchItem].id)}}function y(s){const{target:d}=s,b=d.closest(".nav-button");if(!b)return;const k=parseInt(b.dataset.groupId,10);o.searchElement.value="",n.rawSearchText="",n.searchText="",n.activeSearchItem=-1,n.currentGroupIndex=n.groups.findIndex(j=>j.id===k)}function R(s){const{target:d,key:b}=s,k=j=>{j&&(D(s),j.focus())};switch(b){case"ArrowLeft":return k(d.previousElementSibling);case"ArrowRight":return k(d.nextElementSibling);case"Home":return k(d.parentElement.firstElementChild);case"End":return k(d.parentElement.lastElementChild)}}async function H(s){const d=await n.database.getEmojiByUnicodeOrName(s),b=[...n.currentEmojis,...n.currentFavorites].find(j=>j.id===s),k=b.unicode&&T(b,n.currentSkinTone);await n.database.incrementFavoriteEmojiCount(s),c("emoji-click",{emoji:d,skinTone:n.currentSkinTone,...k&&{unicode:k},...b.name&&{name:b.name}})}async function ie(s){const{target:d}=s;if(!d.classList.contains("emoji"))return;D(s);const b=d.id.substring(4);H(b)}function re(s){n.currentSkinTone=s,n.skinTonePickerExpanded=!1,u("skintone-button"),c("skin-tone-change",{skinTone:s}),n.database.setPreferredSkinTone(s)}function ft(s){const{target:{id:d}}=s,b=d&&d.match(/^skintone-(\d)/);if(!b)return;D(s);const k=parseInt(b[1],10);re(k)}function mt(s){n.skinTonePickerExpanded=!n.skinTonePickerExpanded,n.activeSkinTone=n.currentSkinTone,n.skinTonePickerExpanded&&(D(s),ue(()=>u("skintone-list")))}a(()=>{n.skinTonePickerExpanded?o.skinToneDropdown.addEventListener("transitionend",()=>{n.skinTonePickerExpandedAfterAnimation=!0},{once:!0}):n.skinTonePickerExpandedAfterAnimation=!1});function ht(s){if(!n.skinTonePickerExpanded)return;const d=async b=>{D(s),n.activeSkinTone=b};switch(s.key){case"ArrowUp":return d(_e(!0,n.activeSkinTone,n.skinTones));case"ArrowDown":return d(_e(!1,n.activeSkinTone,n.skinTones));case"Home":return d(0);case"End":return d(n.skinTones.length-1);case"Enter":return D(s),re(n.activeSkinTone);case"Escape":return D(s),n.skinTonePickerExpanded=!1,u("skintone-button")}}function pt(s){if(n.skinTonePickerExpanded)switch(s.key){case" ":return D(s),re(n.activeSkinTone)}}async function gt(s){const{relatedTarget:d}=s;(!d||d.id!=="skintone-list")&&(n.skinTonePickerExpanded=!1)}function bt(s){n.rawSearchText=s.target.value}return{$set(s){le(n,s)},$destroy(){i.abort()}}}const Zn="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Jn="en";var Qn={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}},eo=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}";const lt=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],to=`:host{--emoji-font-family:${at}}`;class dt extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=eo+to,this.shadowRoot.appendChild(o),this._ctx={locale:Jn,dataSource:Zn,skinToneEmoji:gn,customCategorySorting:vn,customEmoji:null,i18n:Qn,emojiVersion:null,...e};for(const i of lt)i!=="database"&&Object.prototype.hasOwnProperty.call(this,i)&&(this._ctx[i]=this[i],delete this[i]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=Xn(this.shadowRoot,this._ctx))}disconnectedCallback(){he(()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch(o=>console.error(o))}})}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,o,i){this._set(e.replace(/-([a-z])/g,(r,n)=>n.toUpperCase()),e==="emoji-version"?parseFloat(i):i)}_set(e,o){this._ctx[e]=o,this._cmp&&this._cmp.$set({[e]:o}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:e,dataSource:o,database:i}=this._ctx;(!i||i.locale!==e||i.dataSource!==o)&&this._set("database",new fn({locale:e,dataSource:o}))}_dbFlush(){he(()=>this._dbCreate())}}const ut={};for(const t of lt)ut[t]={get(){return t==="database"&&this._dbCreate(),this._ctx[t]},set(e){if(t==="database")throw new Error("database is read-only");this._set(t,e)}};Object.defineProperties(dt.prototype,ut);customElements.get("emoji-picker")||customElements.define("emoji-picker",dt);const no={class:"app"},oo={class:"wrapper"},io={class:"conversation-area shadow-md"},ro=h("div",{class:"search-barss"},[h("input",{type:"text",class:"border-2 border-[#f9fafb]",placeholder:"Search..."})],-1),so=["onClick"],ao=["src"],co={class:"msg-detail"},lo={class:"msg-username"},uo={class:"msg-content"},fo={class:"msg-message"},mo={class:"msg-date"},ho=["src"],po={class:"msg-detail"},go={class:"msg-username"},bo={class:"msg-content"},yo={class:"msg-message"},vo={class:"msg-date"},ko={class:"chat-area"},Eo={key:0,class:"chat-area-header bg-[#f9fafb]"},_o={class:"chat-area-title"},wo={class:"chat-area-group"},jo=["src"],To={key:1,class:"chat-area-header bg-[#f9fafb]"},So={class:"chat-area-title"},xo={class:"chat-area-group"},Co=["src"],Io={class:"chat-area-main"},Mo={class:"chat-msg-profile"},Ao=["src"],Do={class:"chat-msg-date"},Lo={class:"chat-msg-content"},$o={class:"chat-msg-text"},Oo={class:"chat-area-footer"},Bo={class:"detail-area"},Fo={key:0,class:"detail-area-header"},No=h("div",{class:"msg-profile group"},[h("img",{src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/3364143/download+%2812%29.png",class:"rounded-full"})],-1),Ro=h("div",{class:"detail-title"},"Miguel Cohen",-1),Po=h("div",{class:"detail-subtitle"},"Created by Aysenur, 1 May 2020",-1),zo=[No,Ro,Po],Uo={key:1,class:"detail-area-header"},Ko={class:"msg-profile group"},Wo=["src"],Go={class:"detail-title"},Vo={class:"detail-subtitle"},Ho={class:"detail-photos"},Yo={class:"detail-photo-title flex"},qo={xmlns:"http://www.w3.org/2000/svg",style:{height:"20px",width:"40px"},viewbox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-image"},Xo=h("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),Zo=h("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),Jo=h("path",{d:"M21 15l-5-5L5 21"},null,-1),Qo=[Xo,Zo,Jo],ei=h("div",{class:"view-more"},"View More",-1),ci={__name:"Index",props:{conversationProp:Object},setup(t){const e=P([]),o=P([]),i=P({}),r=P(""),n=P(null),a=P(!1),u=t,m=async()=>{var _,w;const g=await Y.get("/api/conversations");e.value=g.data,(_=u==null?void 0:u.conversationProp)!=null&&_.id?l((w=u==null?void 0:u.conversationProp)==null?void 0:w.id):e.value.length>0&&l(e.value[0].id)},c=async g=>{const _=await Y.get(`/api/conversations/${g}/messages`);o.value=_.data},l=g=>{i.value=e.value.find(_=>_.id===g),c(g)},p=async()=>{r.value.trim()!==""&&(await Y.post("/api/messages",{conversation_id:i.value.id,content:r.value}),r.value="",c(i.value.id))},f=async g=>{const _=g.target.files[0];if(_){const w=new FormData;w.append("file",_),w.append("conversation_id",i.value.id),await Y.post("/api/files",w,{headers:{"Content-Type":"multipart/form-data"}}),c(i.value.id)}},v=()=>{document.querySelector('input[type="file"]').click()},A=()=>{a.value=!a.value},T=g=>{console.log(g.detail),r.value+=g.detail.unicode,A()},E=()=>{window.echo.channel(`conversation.${i.value.id}`).listen("MessageSent",g=>{o.value.push(g.message)})};return yt(async()=>{await m(),n.value=(await Y.get("/api/user")).data.id,E()}),(g,_)=>{const w=vt("emoji-picker");return x(),Be(Tt,null,{default:kt(()=>{var $,W,G,J,Q,ee,V,N,te,ne,oe;return[h("div",no,[h("div",oo,[h("div",io,[ro,(x(!0),I(q,null,pe(e.value,y=>{var R,H,ie;return x(),I("div",{key:y.id,class:Fe(["msg",{active:y.id===i.value.id}]),onClick:re=>l(y.id)},[(y==null?void 0:y.sender_id)!=n.value?(x(),I(q,{key:0},[h("img",{class:"msg-profile",src:y.sender.image,alt:""},null,8,ao),h("div",co,[h("div",lo,M((R=y==null?void 0:y.sender)==null?void 0:R.name),1),h("div",uo,[h("span",fo,M(y==null?void 0:y.title),1),h("span",mo,M(y==null?void 0:y.created_at),1)])])],64)):O("",!0),(y==null?void 0:y.receiver_id)!=n.value?(x(),I(q,{key:1},[h("img",{class:"msg-profile",src:(H=y.receiver)==null?void 0:H.image,alt:""},null,8,ho),h("div",po,[h("div",go,M((ie=y.receiver)==null?void 0:ie.name),1),h("div",bo,[h("span",yo,M(y==null?void 0:y.title),1),h("span",vo,M(ge(be)(y==null?void 0:y.created_at,"d MMMM Y")),1)])])],64)):O("",!0)],10,so)}),128))]),h("div",ko,[(($=i.value)==null?void 0:$.sender_id)!=n.value?(x(),I("div",Eo,[h("div",_o,M((W=i.value)==null?void 0:W.title),1),h("div",wo,[h("img",{class:"chat-area-profile",src:(G=i.value.sender)==null?void 0:G.image,alt:""},null,8,jo)])])):O("",!0),((J=i.value)==null?void 0:J.receiver_id)!=n.value?(x(),I("div",To,[h("div",So,M((Q=i.value.receiver)==null?void 0:Q.name),1),h("div",xo,[h("img",{class:"chat-area-profile",src:(ee=i.value.receiver)==null?void 0:ee.image,alt:""},null,8,Co)])])):O("",!0),h("div",Io,[(x(!0),I(q,null,pe(o.value,y=>(x(),I("div",{key:y.id,class:Fe(["chat-msg",{owner:y.user_id===n.value}])},[h("div",Mo,[h("img",{class:"chat-msg-img",src:y.user.image,alt:""},null,8,Ao),h("div",Do,"Message seen "+M(ge(be)(y.created_at,"d MMMM Y")),1)]),h("div",Lo,[(x(!0),I(q,null,pe(y.content.split(`
`),R=>(x(),I("div",$o,M(R),1))),256))])],2))),128))]),h("div",Oo,[h("input",{type:"file",onChange:f,style:{display:"none"},ref:"fileInput"},null,544),h("button",{onClick:v},"Attach File"),h("button",{onClick:A},"😊"),a.value?(x(),Be(w,{key:0,onEmojiClick:T})):O("",!0),Et(h("input",{type:"text",class:"border-2 border-[#f9fafb] focus: border-[#f9fafb]",placeholder:"Type something here...","onUpdate:modelValue":_[0]||(_[0]=y=>r.value=y),onKeyup:wt(p,["enter"])},null,544),[[_t,r.value]])])]),h("div",Bo,[((V=i.value)==null?void 0:V.sender_id)!=n.value?(x(),I("div",Fo,zo)):O("",!0),((N=i.value)==null?void 0:N.receiver_id)!=n.value?(x(),I("div",Uo,[h("div",Ko,[h("img",{src:(te=i.value.receiver)==null?void 0:te.image,class:"rounded-full"},null,8,Wo)]),h("div",Go,M((ne=i.value.receiver)==null?void 0:ne.name),1),h("div",Vo,"Created by "+M((oe=i.value.sender)==null?void 0:oe.name)+", "+M(ge(be)(i.value.created_at,"d MMMM Y")),1)])):O("",!0),h("div",Ho,[h("div",Yo,[(x(),I("svg",qo,Qo)),jt(" Shared Media ")]),ei])])])])]}),_:1})}}};export{ci as default};
